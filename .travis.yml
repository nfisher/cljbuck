dist: trusty
language: java

before_install:
  - sudo apt-get update
  - sudo apt-get install -y ant
  # Install Buck
  - test -d $HOME/.buck || git clone --branch v2017.09.04.02 --depth 1 https://github.com/facebook/buck.git $HOME/.buck
  - ls $HOME/.buck
  - cd $HOME/.buck; ant; cd - # build then jump back to prev directory
  - rm -rf $HOME/.buck/.git # don't bother caching the .git folder
  - $HOME/.buck/bin/buck --version

script:
  - $HOME/.buck/bin/buck test --all

branches:
  except:
    - gh-pages

cache:
  directories:
    - $HOME/.buck/
    - buck-out/cache # hopefully this speeds tings up a bit...
